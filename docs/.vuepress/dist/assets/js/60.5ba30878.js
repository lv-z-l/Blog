(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{648:function(t,r,e){"use strict";e.r(r);var a=e(17),o=Object(a.a)({},(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"浏览器环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器环境"}},[t._v("#")]),t._v(" "),e("strong",[t._v("浏览器环境")])]),t._v(" "),e("p",[t._v("有了服务器端模块以后，很自然地，大家就想要客户端模块。而且最好两者能够兼容，一个模块不用修改，在服务器和浏览器都可以运行。")]),t._v(" "),e("p",[t._v("但是，由于一个重大的局限，使得CommonJS规范不适用于浏览器环境。还是上一节的代码，如果在浏览器中运行，会有一个很大的问题，你能看出来吗？")]),t._v(" "),e("blockquote",[e("p",[t._v("var math = require('math');")]),t._v(" "),e("p",[t._v("math.add(2, 3);")])]),t._v(" "),e("p",[t._v("第二行math.add(2, 3)，在第一行require('math')之后运行，因此必须等math.js加载完成。也就是说，如果加载时间很长，整个应用就会停在那里等。")]),t._v(" "),e("p",[t._v('这对服务器端不是一个问题，因为所有的模块都存放在本地硬盘，可以同步加载完成，等待时间就是硬盘的读取时间。但是，对于浏览器，这却是一个大问题，因为模块都放在服务器端，等待时间取决于网速的快慢，可能要等很长时间，浏览器处于"假死"状态。')]),t._v(" "),e("p",[t._v('因此，浏览器端的模块，不能采用"同步加载"（synchronous），只能采用"异步加载"（asynchronous）。这就是AMD规范诞生的背景。')]),t._v(" "),e("h2",{attrs:{id:"amd"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#amd"}},[t._v("#")]),t._v(" "),e("strong",[t._v("AMD")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/amdjs/amdjs-api/wiki/AMD",target:"_blank",rel:"noopener noreferrer"}},[t._v("AMD"),e("OutboundLink")],1),t._v('是"Asynchronous Module Definition"的缩写，意思就是"异步模块定义"。它采用异步方式加载模块，模块的加载不影响它后面语句的运行。所有依赖这个模块的语句，都定义在一个回调函数中，等到加载完成之后，这个回调函数才会运行。')]),t._v(" "),e("p",[t._v("AMD也采用require()语句加载模块，但是不同于CommonJS，它要求两个参数：")]),t._v(" "),e("blockquote",[e("p",[t._v("require([module], callback);")])]),t._v(" "),e("p",[t._v("第一个参数[module]，是一个数组，里面的成员就是要加载的模块；第二个参数callback，则是加载成功之后的回调函数。如果将前面的代码改写成AMD形式，就是下面这样：")]),t._v(" "),e("blockquote",[e("p",[t._v("require(['math'], function (math) {")]),t._v(" "),e("p",[t._v("math.add(2, 3);")]),t._v(" "),e("p",[t._v("});")])]),t._v(" "),e("p",[t._v("math.add()与math模块加载不是同步的，浏览器不会发生假死。所以很显然，AMD比较适合浏览器环境。")]),t._v(" "),e("p",[t._v("目前，主要有两个Javascript库实现了AMD规范："),e("a",{attrs:{href:"http://requirejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("require.js"),e("OutboundLink")],1),t._v("和"),e("a",{attrs:{href:"https://github.com/cujojs/curl",target:"_blank",rel:"noopener noreferrer"}},[t._v("curl.js"),e("OutboundLink")],1),t._v("。")])])}),[],!1,null,null,null);r.default=o.exports}}]);