# CSS-定位机制

## CSS 定位机制

CSS 有三种基本的定位机制：普通流、浮动（float）和绝对定位（position）。

除非专门指定，否则所有框都在普通流中定位。也就是说，普通流中的元素的位置由元素在 (X)HTML 中的位置决定。

块级框从上到下一个接一个地排列，框之间的垂直距离是由框的垂直外边距计算出来。

行内框在一行中水平布置。可以使用水平内边距、边框和外边距调整它们的间距。但是，垂直内边距、边框和外边距不影响行内框的高度。由一行形成的水平框称为*行框（Line Box）*，行框的高度总是足以容纳它包含的所有行内框。不过，设置行高可以增加这个框的高度。

## 标准文档流的概念

标准流指的是在不使用其他的与排列和定位相关的特殊 CSS 规则时，各种元素的排列规则。HTML 文档中的元素可以分为两大类：行内元素和块级元素。

1. 行内元素不占据单独的空间，依附于块级元素，行内元素没有自己的区域，从左到右排列。它同样是 DOM 树中的一个节点，在这一点上行内元素和块级元素是没有区别的。
2. 块级元素总是以块的形式表现出来，并且跟同级的兄弟块依次竖直排列，左右自动伸展，直到包含它的元素的边界，在水平方向不能并排。

## CSS position 属性

通过使用 [position 属性](https://www.w3school.com.cn/cssref/pr_class_position.asp)，我们可以选择 4 种不同类型的定位，这会影响元素框生成的方式。

position 属性值的含义：

- static（默认值）

  元素框正常生成。块级元素生成一个矩形框，作为文档流的一部分，行内元素则会创建一个或多个行框，置于其父元素中。此时 `top`, `right`, `bottom`, `left` 和 `z-index`属性无效。

- relative

  元素框偏移某个距离。元素仍保持其未定位前的形状，它原本所占的空间仍保留。

  (相对于原来本身的位置通过 top,bottom,left,right 定位，并且可以通过 z-index 进行层次分级。)

- absolute

  元素框从文档流完全删除（脱离标准文档流），并相对于其包含块定位。包含块可能是文档中的另一个元素或者是初始包含块。元素原先在正常文档流中所占的空间会关闭，就好像元素原来不存在一样。元素定位后生成一个块级框，而不论原来它在正常流中生成何种类型的框。

  （通过 top,bottom,left,right 定位，定位的起始位置为最近的父元素(postion 不为 static)，否则为 Body 坐标原点，可以通过 z-index 进行层次分级。）

- fixed

  元素框的表现类似于将 position 设置为 absolute，不过其包含块是视窗本身。

  （固定定位，脱离文档流，相对于浏览器窗口进行定位，在拖拽页面滚动条时，该元素不会随其一起滚动，可以通过 z-index 进行层次分级。）

**FAQ：**相对定位实际上被看作普通流定位模型的一部分，因为元素的位置相对于它在普通流中的位置。

## float

- 浮动的元素脱离了标准文档流，即脱标
- 浮动的元素互相贴靠
- 浮动的元素会产生”字围“效果
- 浮动元素有收缩效果

## 元素脱离文档流引发父级边框塌陷问题

如果使用 position:absolute 和 position:fixed 都会导致元素脱离文档流，由此就会产生相应的问题：子元素脱离文档流，父元素无法被撑开。

解决方法:

- 将父级边框的高度 height 写成一个固定的高度。
- 增加一个空的 div 标签, 清除浮动。设置样式。

```css
clear: both;
```

- 父类增加一个伪类

```css
.demo:after {
  content: '';
  display: block;
  clear: both;
}
```

- 设置 overflow 属性

```css
overflow: scroll;
```
